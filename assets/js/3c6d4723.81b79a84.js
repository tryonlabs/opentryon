"use strict";(globalThis.webpackChunkopentryon_docs=globalThis.webpackChunkopentryon_docs||[]).push([[4629],{2782:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"api-reference/kling-ai","title":"Kling AI Virtual Try-On API","description":"The KlingAIVTONAdapter provides an interface to Kling AI\'s Kolors Virtual Try-On API for generating realistic virtual try-on images with asynchronous processing.","source":"@site/docs/api-reference/kling-ai.md","sourceDirName":"api-reference","slug":"/api-reference/kling-ai","permalink":"/opentryon/api-reference/kling-ai","draft":false,"unlisted":false,"editUrl":"https://github.com/tryonlabs/opentryon/tree/main/docs/docs/api-reference/kling-ai.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Diffusion API Reference","permalink":"/opentryon/api-reference/diffusion"},"next":{"title":"Amazon Nova Canvas Virtual Try-On API","permalink":"/opentryon/api-reference/nova-canvas"}}');var r=s(4848),l=s(8453);const a={},t="Kling AI Virtual Try-On API",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Class: <code>KlingAIVTONAdapter</code>",id:"class-klingaivtonadapter",level:3},{value:"Constructor",id:"constructor",level:4},{value:"Methods",id:"methods",level:4},{value:"<code>generate(source_image, reference_image, model=None, **kwargs)</code>",id:"generatesource_image-reference_image-modelnone-kwargs",level:5},{value:"<code>generate_and_decode(source_image, reference_image, model=None, **kwargs)</code>",id:"generate_and_decodesource_image-reference_image-modelnone-kwargs",level:5},{value:"<code>query_task_status(task_id)</code>",id:"query_task_statustask_id",level:5},{value:"<code>poll_task_until_complete(task_id, poll_interval=2, max_wait_time=300)</code>",id:"poll_task_until_completetask_id-poll_interval2-max_wait_time300",level:5},{value:"Image Size Limits",id:"image-size-limits",level:2},{value:"Model Versions",id:"model-versions",level:2},{value:"Asynchronous Processing",id:"asynchronous-processing",level:2},{value:"Custom Polling",id:"custom-polling",level:3},{value:"Image Input Formats",id:"image-input-formats",level:2},{value:"File Paths",id:"file-paths",level:3},{value:"URLs",id:"urls",level:3},{value:"File-like Objects",id:"file-like-objects",level:3},{value:"Base64 Strings",id:"base64-strings",level:3},{value:"Supported Base URLs",id:"supported-base-urls",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Use Environment Variables",id:"use-environment-variables",level:3},{value:"Image Preprocessing",id:"image-preprocessing",level:3},{value:"Task Polling",id:"task-polling",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"API Key Issues",id:"api-key-issues",level:3},{value:"Image Format Issues",id:"image-format-issues",level:3},{value:"Task Timeout",id:"task-timeout",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"kling-ai-virtual-try-on-api",children:"Kling AI Virtual Try-On API"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"KlingAIVTONAdapter"})," provides an interface to Kling AI's Kolors Virtual Try-On API for generating realistic virtual try-on images with asynchronous processing."]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Kling AI's Kolors Virtual Try-On API combines a source image (person/model) with a reference image (garment/product) to create realistic virtual try-on results. The adapter handles authentication, image preparation, task polling, and response decoding automatically."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"API Endpoint:"})," ",(0,r.jsx)(n.code,{children:"POST /v1/images/kolors-virtual-try-on"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Reference:"})," ",(0,r.jsx)(n.a,{href:"https://app.klingai.com/global/dev/document-api/apiReference/model/functionalityTry",children:"Kling AI API Documentation"})]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(n.p,{children:["No additional installation required. The adapter uses the ",(0,r.jsx)(n.code,{children:"requests"})," and ",(0,r.jsx)(n.code,{children:"PyJWT"})," libraries which are included with OpenTryOn."]}),"\n",(0,r.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsx)(n.p,{children:"Kling AI requires both an API key (access key) and a secret key for authentication. The adapter automatically generates a JWT token using these credentials. You can provide them in two ways:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Environment Variables"})," (Recommended):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'export KLING_AI_API_KEY="your_api_key"\nexport KLING_AI_SECRET_KEY="your_secret_key"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Constructor Parameters"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'adapter = KlingAIVTONAdapter(\n    api_key="your_api_key",\n    secret_key="your_secret_key"\n)\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from dotenv import load_dotenv\nload_dotenv()\n\nfrom tryon.api import KlingAIVTONAdapter\n\n# Initialize adapter (uses KLING_AI_API_KEY and KLING_AI_SECRET_KEY from environment)\nadapter = KlingAIVTONAdapter()\n\n# Generate virtual try-on images\nimages = adapter.generate_and_decode(\n    source_image="data/person.jpg",\n    reference_image="data/shirt.jpg"\n)\n\n# Save results\nfor idx, image in enumerate(images):\n    image.save(f"outputs/result_{idx}.png")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,r.jsxs)(n.h3,{id:"class-klingaivtonadapter",children:["Class: ",(0,r.jsx)(n.code,{children:"KlingAIVTONAdapter"})]}),"\n",(0,r.jsx)(n.p,{children:"Adapter class for Kling AI Kolors Virtual Try-On API."}),"\n",(0,r.jsx)(n.h4,{id:"constructor",children:"Constructor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"KlingAIVTONAdapter(\n    api_key: Optional[str] = None,\n    secret_key: Optional[str] = None,\n    base_url: Optional[str] = None\n)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"api_key"})," (str, optional): Kling AI API key. Defaults to ",(0,r.jsx)(n.code,{children:"KLING_AI_API_KEY"})," environment variable. If not provided, raises ",(0,r.jsx)(n.code,{children:"ValueError"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"secret_key"})," (str, optional): Kling AI secret key. Defaults to ",(0,r.jsx)(n.code,{children:"KLING_AI_SECRET_KEY"})," environment variable. If not provided, raises ",(0,r.jsx)(n.code,{children:"ValueError"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"base_url"})," (str, optional): Base URL for Kling AI API. Defaults to ",(0,r.jsx)(n.code,{children:"KLING_AI_BASE_URL"})," environment variable or ",(0,r.jsx)(n.code,{children:"'https://api-singapore.klingai.com'"})," if not set."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Raises:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ValueError"}),": If API key or secret key is not provided via parameter or environment variable."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Using environment variables\nimport os\nos.environ['KLING_AI_API_KEY'] = 'your_api_key'\nos.environ['KLING_AI_SECRET_KEY'] = 'your_secret_key'\nadapter = KlingAIVTONAdapter()\n\n# Using parameters\nadapter = KlingAIVTONAdapter(\n    api_key=\"your_api_key\",\n    secret_key=\"your_secret_key\",\n    base_url=\"https://api-singapore.klingai.com\"\n)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h5,{id:"generatesource_image-reference_image-modelnone-kwargs",children:(0,r.jsx)(n.code,{children:"generate(source_image, reference_image, model=None, **kwargs)"})}),"\n",(0,r.jsx)(n.p,{children:"Generate virtual try-on image(s) using Kling AI API."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"source_image"})," (str or io.BytesIO): Human/person image in one of these formats:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"File path (str): Path to local image file"}),"\n",(0,r.jsx)(n.li,{children:"URL (str): HTTP/HTTPS URL to image"}),"\n",(0,r.jsx)(n.li,{children:"File-like object (io.BytesIO): BytesIO or similar"}),"\n",(0,r.jsx)(n.li,{children:"Base64 string (str): Base64-encoded image"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"reference_image"})," (str or io.BytesIO): Cloth/garment image in same formats as ",(0,r.jsx)(n.code,{children:"source_image"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"model"})," (str, optional): Model version to use. Options:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'kolors-virtual-try-on-v1'"}),": Original model version"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'kolors-virtual-try-on-v1-5'"}),": Enhanced version"]}),"\n",(0,r.jsx)(n.li,{children:"If not specified, uses API default"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"**kwargs"}),": Additional parameters for Kling AI API:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"webhook_url"})," (str, optional): URL to receive async results when task completes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"webhook_secret"})," (str, optional): Secret key for webhook authentication"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"List[str]"}),": List of image URLs when task succeeds"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Raises:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ValueError"}),": If images exceed size limits, required parameters are missing, API returns an error, or task fails/times out"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," This method automatically polls for task completion until images are available. The polling continues until the task succeeds, fails, or times out (default: 5 minutes)."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Using file paths\nimage_urls = adapter.generate(\n    source_image="person.jpg",\n    reference_image="hoodie.jpg"\n)\n\n# Using URLs\nimage_urls = adapter.generate(\n    source_image="https://example.com/person.jpg",\n    reference_image="https://example.com/garment.jpg",\n    model="kolors-virtual-try-on-v1-5"\n)\n'})}),"\n",(0,r.jsx)(n.h5,{id:"generate_and_decodesource_image-reference_image-modelnone-kwargs",children:(0,r.jsx)(n.code,{children:"generate_and_decode(source_image, reference_image, model=None, **kwargs)"})}),"\n",(0,r.jsx)(n.p,{children:"Generate virtual try-on images and decode them to PIL Image objects."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"source_image"})," (str or io.BytesIO): Human/person image (same formats as ",(0,r.jsx)(n.code,{children:"generate()"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"reference_image"})," (str or io.BytesIO): Cloth/garment image (same formats as ",(0,r.jsx)(n.code,{children:"generate()"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"model"})," (str, optional): Model version to use (e.g., ",(0,r.jsx)(n.code,{children:"'kolors-virtual-try-on-v1-5'"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"**kwargs"}),": Additional parameters for Kling AI API"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"List[PIL.Image.Image]"}),": List of PIL Image objects ready for display or saving"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Raises:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ValueError"}),": If images exceed size limits, required parameters are missing, API returns an error, or image decoding fails"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'images = adapter.generate_and_decode(\n    source_image="data/person.jpg",\n    reference_image="data/garment.jpg",\n    model="kolors-virtual-try-on-v1-5"\n)\n\n# Save all results\nfor idx, image in enumerate(images):\n    image.save(f"outputs/vton_result_{idx}.png")\n'})}),"\n",(0,r.jsx)(n.h5,{id:"query_task_statustask_id",children:(0,r.jsx)(n.code,{children:"query_task_status(task_id)"})}),"\n",(0,r.jsx)(n.p,{children:"Query the status of a virtual try-on task by task ID."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (str): The task ID returned from the initial API request"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dict"}),": Task status response containing:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"}),": Error code (0 = success)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"}),": Status message"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"request_id"}),": System-generated request ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"}),": Task data containing:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"}),": Task identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_status"}),": Current status (",(0,r.jsx)(n.code,{children:'"submitted"'}),", ",(0,r.jsx)(n.code,{children:'"processing"'}),", ",(0,r.jsx)(n.code,{children:'"succeed"'}),", ",(0,r.jsx)(n.code,{children:'"fail"'}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_status_msg"}),": Additional status information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"}),": Task creation timestamp (milliseconds)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"}),": Task update timestamp (milliseconds)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_result"}),": Result data (when status is ",(0,r.jsx)(n.code,{children:'"succeed"'}),")","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"images"}),": List of image objects with index and url"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Raises:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ValueError"}),": If the API request fails or returns an error"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"status = adapter.query_task_status(\"your_task_id\")\nprint(f\"Status: {status['data']['task_status']}\")\n"})}),"\n",(0,r.jsx)(n.h5,{id:"poll_task_until_completetask_id-poll_interval2-max_wait_time300",children:(0,r.jsx)(n.code,{children:"poll_task_until_complete(task_id, poll_interval=2, max_wait_time=300)"})}),"\n",(0,r.jsx)(n.p,{children:"Poll task status until completion and return image URLs."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (str): The task ID returned from the initial API request"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"poll_interval"})," (int): Number of seconds to wait between status checks. Default: ",(0,r.jsx)(n.code,{children:"2"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"max_wait_time"})," (int): Maximum time to wait for task completion in seconds. Default: ",(0,r.jsx)(n.code,{children:"300"})," (5 minutes)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"List[str]"}),": List of image URLs when task succeeds"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Raises:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ValueError"}),": If the task fails, times out, or encounters an error"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Custom polling settings\nimage_urls = adapter.poll_task_until_complete(\n    task_id="your_task_id",\n    poll_interval=3,  # Check every 3 seconds\n    max_wait_time=600  # Maximum 10 minutes\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"image-size-limits",children:"Image Size Limits"}),"\n",(0,r.jsx)(n.p,{children:"Kling AI has the following image size requirements:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Maximum image pixels:"})," 16,000,000 pixels (equivalent to 4,096 x 4,096)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Maximum dimension:"})," 4,096 pixels per side"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Supported formats:"})," JPG, PNG"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Images are automatically validated before sending to the API. If an image exceeds these limits, a ",(0,r.jsx)(n.code,{children:"ValueError"})," is raised with a helpful message."]}),"\n",(0,r.jsx)(n.h2,{id:"model-versions",children:"Model Versions"}),"\n",(0,r.jsx)(n.p,{children:"Kling AI supports multiple model versions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"kolors-virtual-try-on-v1"})}),": Original model version"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"kolors-virtual-try-on-v1-5"})}),": Enhanced version (recommended)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If not specified, the API uses the default model version."}),"\n",(0,r.jsx)(n.h2,{id:"asynchronous-processing",children:"Asynchronous Processing"}),"\n",(0,r.jsx)(n.p,{children:"Kling AI processes virtual try-on requests asynchronously. The adapter automatically:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Submits the request and receives a ",(0,r.jsx)(n.code,{children:"task_id"})]}),"\n",(0,r.jsx)(n.li,{children:"Polls the task status endpoint until completion"}),"\n",(0,r.jsx)(n.li,{children:"Returns image URLs when the task succeeds"}),"\n",(0,r.jsx)(n.li,{children:"Raises errors if the task fails or times out (default timeout: 5 minutes)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"custom-polling",children:"Custom Polling"}),"\n",(0,r.jsx)(n.p,{children:"You can customize polling behavior:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Manual polling with custom settings\ntask_id = "your_task_id"\nimage_urls = adapter.poll_task_until_complete(\n    task_id=task_id,\n    poll_interval=2,  # Check every 2 seconds\n    max_wait_time=600  # Maximum 10 minutes\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"image-input-formats",children:"Image Input Formats"}),"\n",(0,r.jsx)(n.p,{children:"The adapter supports multiple input formats:"}),"\n",(0,r.jsx)(n.h3,{id:"file-paths",children:"File Paths"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'images = adapter.generate_and_decode(\n    source_image="data/person.jpg",\n    reference_image="data/garment.jpg"\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"urls",children:"URLs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'images = adapter.generate_and_decode(\n    source_image="https://example.com/person.jpg",\n    reference_image="https://example.com/garment.jpg"\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"file-like-objects",children:"File-like Objects"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from io import BytesIO\n\nwith open("person.jpg", "rb") as f:\n    person_bytes = BytesIO(f.read())\n\nwith open("garment.jpg", "rb") as f:\n    garment_bytes = BytesIO(f.read())\n\nimages = adapter.generate_and_decode(\n    source_image=person_bytes,\n    reference_image=garment_bytes\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"base64-strings",children:"Base64 Strings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import base64\n\nwith open("person.jpg", "rb") as f:\n    person_b64 = base64.b64encode(f.read()).decode()\n\nwith open("garment.jpg", "rb") as f:\n    garment_b64 = base64.b64encode(f.read()).decode()\n\nimages = adapter.generate_and_decode(\n    source_image=person_b64,\n    reference_image=garment_b64\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"supported-base-urls",children:"Supported Base URLs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"https://api-singapore.klingai.com"})})," (Singapore) - Default"]}),"\n",(0,r.jsx)(n.li,{children:"Other regional endpoints may be available (check Kling AI documentation)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from dotenv import load_dotenv\nload_dotenv()\n\nfrom tryon.api import KlingAIVTONAdapter\nfrom PIL import Image\n\n# Initialize adapter\nadapter = KlingAIVTONAdapter()\n\n# Generate virtual try-on\nimages = adapter.generate_and_decode(\n    source_image="data/person.jpg",\n    reference_image="data/shirt.jpg",\n    model="kolors-virtual-try-on-v1-5"\n)\n\n# Process results\nfor idx, image in enumerate(images):\n    # Save image\n    image.save(f"outputs/vton_result_{idx}.png")\n    \n    # Display image (if in Jupyter)\n    # display(image)\n    \n    # Get image info\n    print(f"Image {idx}: {image.size} ({image.mode})")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsxs)(n.p,{children:["The adapter raises ",(0,r.jsx)(n.code,{children:"ValueError"})," for common errors:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'try:\n    images = adapter.generate_and_decode(\n        source_image="person.jpg",\n        reference_image="garment.jpg"\n    )\nexcept ValueError as e:\n    print(f"Error: {e}")\n    # Handle error...\n'})}),"\n",(0,r.jsx)(n.p,{children:"Common errors:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Missing API key or secret key"}),"\n",(0,r.jsx)(n.li,{children:"Invalid image format or size"}),"\n",(0,r.jsx)(n.li,{children:"API request failure"}),"\n",(0,r.jsx)(n.li,{children:"Task timeout or failure"}),"\n",(0,r.jsx)(n.li,{children:"Invalid parameters"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"use-environment-variables",children:"Use Environment Variables"}),"\n",(0,r.jsx)(n.p,{children:"Store your API credentials securely using environment variables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# .env file\nKLING_AI_API_KEY=your_api_key_here\nKLING_AI_SECRET_KEY=your_secret_key_here\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from dotenv import load_dotenv\nload_dotenv()\n\nadapter = KlingAIVTONAdapter()  # Uses environment variables\n"})}),"\n",(0,r.jsx)(n.h3,{id:"image-preprocessing",children:"Image Preprocessing"}),"\n",(0,r.jsx)(n.p,{children:"For best results:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use high-resolution images (at least 512x512)"}),"\n",(0,r.jsx)(n.li,{children:"Ensure person image shows full body or relevant body part"}),"\n",(0,r.jsx)(n.li,{children:"Use clear, well-lit images"}),"\n",(0,r.jsx)(n.li,{children:"Remove background if possible"}),"\n",(0,r.jsx)(n.li,{children:"Ensure images meet size requirements (max 16M pixels)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"task-polling",children:"Task Polling"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Default polling interval (2 seconds) is usually sufficient"}),"\n",(0,r.jsxs)(n.li,{children:["Increase ",(0,r.jsx)(n.code,{children:"max_wait_time"})," for longer processing tasks"]}),"\n",(0,r.jsxs)(n.li,{children:["Monitor task status for debugging:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"status = adapter.query_task_status(task_id)\nprint(f\"Status: {status['data']['task_status']}\")\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"api-key-issues",children:"API Key Issues"}),"\n",(0,r.jsx)(n.p,{children:"If you get an authentication error:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify your API key and secret key are correct"}),"\n",(0,r.jsxs)(n.li,{children:["Check environment variables are set: ",(0,r.jsx)(n.code,{children:"echo $KLING_AI_API_KEY"})]}),"\n",(0,r.jsx)(n.li,{children:"Ensure API key has sufficient credits/quota"}),"\n",(0,r.jsx)(n.li,{children:"Verify JWT token generation is working"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"image-format-issues",children:"Image Format Issues"}),"\n",(0,r.jsx)(n.p,{children:"If images fail to process:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify image files exist and are readable"}),"\n",(0,r.jsx)(n.li,{children:"Check image format is supported (JPG, PNG)"}),"\n",(0,r.jsx)(n.li,{children:"Ensure images meet size requirements (max 16M pixels, 4096x4096)"}),"\n",(0,r.jsx)(n.li,{children:"Try converting images to RGB format"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"task-timeout",children:"Task Timeout"}),"\n",(0,r.jsx)(n.p,{children:"If tasks timeout:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Increase ",(0,r.jsx)(n.code,{children:"max_wait_time"})," parameter"]}),"\n",(0,r.jsxs)(n.li,{children:["Check task status manually: ",(0,r.jsx)(n.code,{children:"adapter.query_task_status(task_id)"})]}),"\n",(0,r.jsx)(n.li,{children:"Verify API service status"}),"\n",(0,r.jsx)(n.li,{children:"Check for rate limiting"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,r.jsx)(n.p,{children:"If you encounter rate limiting:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Reduce request frequency"}),"\n",(0,r.jsx)(n.li,{children:"Implement retry logic with exponential backoff"}),"\n",(0,r.jsx)(n.li,{children:"Check your API plan limits"}),"\n",(0,r.jsx)(n.li,{children:"Contact Kling AI support for higher limits"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../examples/virtual-tryon",children:"Virtual Try-On Examples"})," - Usage examples"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"overview",children:"API Reference Overview"})," - Complete API reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://app.klingai.com/global/dev/document-api/apiReference/model/functionalityTry",children:"Kling AI Documentation"})," - Official API docs"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>t});var i=s(6540);const r={},l=i.createContext(r);function a(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);